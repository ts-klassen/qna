# ログ閲覧ページ 要求定義

## 概要

ログ閲覧ページは、QNAシステムのユーザーが生成されたログを閲覧し、分析できるようにするためのページです。このページはQNA APIから取得したログデータを加工し、使いやすい形で表示します。

## 要求事項

### 機能要件

1. **ログの取得**
   - QNA APIの`/qna/api/v2/qna/lookup`エンドポイントを使用してログデータを取得する。
   - 特定のQNA IDに基づいて関連するログを取得する。
     - QNA ID は　URI のハッシュから取得する。
       - "view_qna_log.html#this-is-the-qna-id

2. **ログの加工**
   - 取得したログデータをユーザーが理解しやすい形式に整形する。
     - 加工する部分の JavaScript は、バックエンド担当者が編集しやすいように
   - フィルタリングやソート機能は不要。

3. **ログの表示**
   - チャットのような形式でログを表示する。
   - 各ログエントリーの詳細（タイプ、時間、ユーザー、ペイロード等）を表示する。
     - 表示する内容
       - ログの種類
       - 日付
       - 内容
   - ページネーションは不要（高々20程度なので不要）

4. **検索機能**
   - 不要

5. **エクスポート機能**
   - 不要

### 非機能要件

1. **ユーザーインターフェース**
   - 直感的で使いやすいデザインを採用する。
   - レスポンシブ対応は不要

2. **セキュリティ**
   - ユーザー認証はBasic認証が完了しているので不要
   - ログデータ本文のHTMLインジェクションに気をつける。

3. **パフォーマンス**
   - ログデータは最大で20個くらいだと想定されるので、気にしない。

### 技術要件

1. **フロントエンド**
   - フレームワークやライブラリは使わない。
   - APIとの通信は`fetch`を使用する。

2. **バックエンド**
   - 既存のQNA APIを使用してデータを取得する。

## ユーザーストーリー

1. **ログ閲覧**
   - ユーザーはログ閲覧ページにアクセスし、特定のQNA IDに関連するログを見れる。

2. **ログ検索**
   - 検索はできない

3. **ログエクスポート**
   - エクスポートはできない

## 画面設計

### ログ一覧画面

- **ヘッダー**
  - 不要

- **メインコンテンツ**
  - チャット画面のような形式で表示される

- **フッター**
  - 不要

### ログ詳細モーダル

不要

### エクスポート機能

不要

## データフロー

1. ユーザーがログ閲覧ページにアクセス。
2. フロントエンドがQNA APIを呼び出し、必要なログデータを取得。
3. 取得したデータを加工し、テーブル形式で表示。

## セキュリティ考慮事項

- 表示するデータは適切にエスケープし、XSS攻撃を防止。

## テスト計画

なし

## スケジュール

1時間でプロトタイプを作る

## リスクと対応策

不問

